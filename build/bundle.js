var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let l;function a(t,e){return l||(l=document.createElement("a")),l.href=e,t===l.href}function c(e,n,r){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}(n,r))}function u(t,e,n){return t.set(n),e}const d="undefined"!=typeof window;let f=d?()=>window.performance.now():()=>Date.now(),p=d?t=>requestAnimationFrame(t):t;const g=new Set;function h(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&p(h)}function m(t,e){t.appendChild(e)}function v(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function $(t){const e=x("style");return function(t,e){m(t.head||t,e)}(v(t),e),e}function b(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function w(){return k(" ")}function _(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function D(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}function z(t,e,n){t.classList[n?"add":"remove"](e)}function C(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}const j=new Set;let P,O=0;function R(t,e,n,r,o,i,s,l=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*i(t);c+=100*t+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=v(t);j.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=$(t).sheet),g=f.__svelte_rules||(f.__svelte_rules={});g[d]||(g[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${d} ${r}ms linear ${o}ms 1 both`,O+=1,d}function T(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-r.length;o&&(t.style.animation=r.join(", "),O-=o,O||p((()=>{O||(j.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),j.clear())})))}function A(t){P=t}function L(){if(!P)throw new Error("Function called outside component initialization");return P}function B(){const t=L();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=C(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}const F=[],I=[],H=[],N=[],M=Promise.resolve();let W=!1;function q(t){H.push(t)}let J=!1;const K=new Set;function U(){if(!J){J=!0;do{for(let t=0;t<F.length;t+=1){const e=F[t];A(e),G(e.$$)}for(A(null),F.length=0;I.length;)I.pop()();for(let t=0;t<H.length;t+=1){const e=H[t];K.has(e)||(K.add(e),e())}H.length=0}while(F.length);for(;N.length;)N.pop()();W=!1,J=!1,K.clear()}}function G(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}let Y;function Q(t,e,n){t.dispatchEvent(C(`${e?"intro":"outro"}${n}`))}const V=new Set;let X;function Z(){X={r:0,c:[],p:X}}function tt(){X.r||o(X.c),X=X.p}function et(t,e){t&&t.i&&(V.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(V.has(t))return;V.add(t),X.c.push((()=>{V.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const rt={duration:0};function ot(n,r,s,l){let a=r(n,s),c=l?0:1,u=null,d=null,m=null;function v(){m&&T(n,m)}function $(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function b(r){const{delay:i=0,duration:s=300,easing:l=e,tick:b=t,css:y}=a||rt,x={start:f()+i,b:r};r||(x.group=X,X.r+=1),u||d?d=x:(y&&(v(),m=R(n,c,r,s,i,l,y)),r&&b(0,1),u=$(x,s),q((()=>Q(n,r,"start"))),function(t){let e;0===g.size&&p(h),new Promise((n=>{g.add(e={c:t,f:n})}))}((t=>{if(d&&t>d.start&&(u=$(d,s),d=null,Q(n,u.b,"start"),y&&(v(),m=R(n,c,u.b,u.duration,0,l,a.css))),u)if(t>=u.end)b(c=u.b,1-c),Q(n,u.b,"end"),d||(u.b?v():--u.group.r||o(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*l(e/u.duration),b(c,1-c)}return!(!u&&!d)})))}return{run(t){i(a)?(Y||(Y=Promise.resolve(),Y.then((()=>{Y=null}))),Y).then((()=>{a=a(),b(t)})):b(t)},end(){v(),u=d=null}}}function it(t){t&&t.c()}function st(t,e,r,s){const{fragment:l,on_mount:a,on_destroy:c,after_update:u}=t.$$;l&&l.m(e,r),s||q((()=>{const e=a.map(n).filter(i);c?c.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(q)}function lt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function at(t,e){-1===t.$$.dirty[0]&&(F.push(t),W||(W=!0,M.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ct(e,n,i,s,l,a,c,u=[-1]){const d=P;A(e);const f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:l,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=i?i(e,n.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),p&&at(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&et(e.$$.fragment),st(e,n.target,n.anchor,n.customElement),U()}A(d)}class ut{$destroy(){lt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const dt=[];function ft(e,n=t){let r;const o=new Set;function i(t){if(s(e,t)&&(e=t,r)){const t=!dt.length;for(const t of o)t[1](),dt.push(t,e);if(t){for(let t=0;t<dt.length;t+=2)dt[t][0](dt[t+1]);dt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(s,l=t){const a=[s,l];return o.add(a),1===o.size&&(r=n(i)||t),s(e),()=>{o.delete(a),0===o.size&&(r(),r=null)}}}}let pt=!1;const gt={name:"db",version:1,stores:[]},ht={callback:t=>{}};let mt=[];async function vt(t){return new Promise(((e,n)=>{pt?Promise.resolve(t()).then((t=>{e(t)})):mt.push((()=>{Promise.resolve(t()).then((t=>{e(t)}))}))}))}async function $t(t,e,n){try{await vt((()=>function(t,e,n){let r={key:e,data:n};return new Promise(((e,n)=>{let o=indexedDB.open(gt.name);o.onerror=function(t){n(Error("IndexedDB database error"))},o.onupgradeneeded=function(e){let r=e.target.result,o=gt.stores.find((e=>e.name==t));o||n(Error("Missing store options")),r.createObjectStore(t,o.options)},o.onsuccess=function(o){let i=o.target.result.transaction([t],"readwrite").objectStore(t).put(r);i.onerror=function(t){n(Error(`Error text ${i.error}`))},i.onsuccess=function(t){e(i.result.data)}}}))}(t,e,n)))}catch(n){ht.callback({message:`Failed to store ${t}#${e} in local storage`,error:n})}}async function bt(t,e,n){try{let n=await vt((()=>function(t,e){return new Promise(((n,r)=>{let o=indexedDB.open(gt.name);o.onerror=function(t){r(Error("Error text"))},o.onupgradeneeded=function(t){t.target.transaction.abort(),r(Error("Not found"))},o.onsuccess=function(i){let s=i.target.result.transaction([t]).objectStore(t).get(e);o.onerror=function(t){r(Error("Error text"))},s.onsuccess=function(t){s.result?n(s.result.data):n(void 0)}}}))}(t,e)));return n}catch(e){return console.log("Failed to load",t,e),n}}function yt(t,e,n,r){let o,i=ft(n);i.options=r||{},i.loaded=!1,i.await=new Promise(((t,e)=>o=t)),i.timeout=void 0;let s=!1;bt(t,e,n).then((t=>{i.loaded=!0,void 0!==t?(s=!0,i.set(t)):(s=!0,i.set(n)),o()}));let l=[];return i.onSave=t=>{l.push(t)},i.save=()=>{i.options.delay?(l.forEach((t=>t(!1))),clearTimeout(i.timeout),i.timeout=setTimeout((()=>{$t(t,e,i.value),l.forEach((t=>t(!0))),clearTimeout(i.timeout)}),i.options.delay)):($t(t,e,i.value),l.forEach((t=>t(!0))))},i.subscribe((t=>{i.value=t,i.loaded&&(s?s=!1:i.save())})),i}const xt={callback:t=>{}};function kt(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){xt.callback({message:`Failed to store ${t} in local storage`,error:e})}}const wt=ft(void 0);ht.callback=t=>{wt.set(t)},xt.callback=t=>{wt.set(t)};const _t=yt("sprites","width",8),Et=yt("sprites","height",8),St=yt("sprites","data",[],{delay:1500,deepCompare:!0}),Dt=function(t,e,n){null==n&&(n=function(t,e){try{let n=localStorage.getItem(t);if("undefined"===n)return e;let r=JSON.parse(n);return null==r&&(r=e),r}catch(n){return console.log("Failed to load",t,n),kt(t,e),e}}(t,e));let r=ft(n),o=!0;return r.subscribe((e=>{r.value=e,o?o=!1:kt(t,e)})),r}("align",{x:"left",y:"bottom"});function zt(e){let n,r,i,s,l,a,c,u,d,f,p,g,h,v,$,k,S,D,C,j;return{c(){n=x("div"),r=x("div"),i=w(),s=x("div"),l=w(),a=x("div"),c=w(),u=x("div"),d=w(),f=x("div"),p=w(),g=x("div"),h=w(),v=x("div"),$=w(),k=x("div"),S=w(),D=x("div"),E(r,"class","svelte-1z0y2i"),z(r,"active",(e[0],e[1](0,0))),E(s,"class","svelte-1z0y2i"),z(s,"active",(e[0],e[1](1,0))),E(a,"class","svelte-1z0y2i"),z(a,"active",(e[0],e[1](2,0))),E(u,"class","svelte-1z0y2i"),z(u,"active",(e[0],e[1](0,1))),E(f,"class","svelte-1z0y2i"),z(f,"active",(e[0],e[1](1,1))),E(g,"class","svelte-1z0y2i"),z(g,"active",(e[0],e[1](2,1))),E(v,"class","svelte-1z0y2i"),z(v,"active",(e[0],e[1](0,2))),E(k,"class","svelte-1z0y2i"),z(k,"active",(e[0],e[1](1,2))),E(D,"class","svelte-1z0y2i"),z(D,"active",(e[0],e[1](2,2))),E(n,"class","align svelte-1z0y2i")},m(t,o){b(t,n,o),m(n,r),m(n,i),m(n,s),m(n,l),m(n,a),m(n,c),m(n,u),m(n,d),m(n,f),m(n,p),m(n,g),m(n,h),m(n,v),m(n,$),m(n,k),m(n,S),m(n,D),C||(j=[_(r,"click",e[6]),_(s,"click",e[7]),_(a,"click",e[8]),_(u,"click",e[9]),_(f,"click",e[10]),_(g,"click",e[11]),_(v,"click",e[12]),_(k,"click",e[13]),_(D,"click",e[14])],C=!0)},p(t,[e]){3&e&&z(r,"active",(t[0],t[1](0,0))),3&e&&z(s,"active",(t[0],t[1](1,0))),3&e&&z(a,"active",(t[0],t[1](2,0))),3&e&&z(u,"active",(t[0],t[1](0,1))),3&e&&z(f,"active",(t[0],t[1](1,1))),3&e&&z(g,"active",(t[0],t[1](2,1))),3&e&&z(v,"active",(t[0],t[1](0,2))),3&e&&z(k,"active",(t[0],t[1](1,2))),3&e&&z(D,"active",(t[0],t[1](2,2)))},i:t,o:t,d(t){t&&y(n),C=!1,o(j)}}}function Ct(t){switch(t){case 0:return"left";case 1:return"center";case 2:return"right"}}function jt(t){switch(t){case 0:return"top";case 1:return"center";case 2:return"bottom"}}function Pt(t,e,n){let r;c(t,Dt,(t=>n(5,r=t)));let o,{align:i}=e,{setStore:s=!1}=e;const l=B();function a(t,e){s?(u(Dt,r.x=Ct(t),r),u(Dt,r.y=jt(e),r),Dt.set(r)):l("change",{align:{x:Ct(t),y:jt(e)}})}return t.$$set=t=>{"align"in t&&n(3,i=t.align),"setStore"in t&&n(4,s=t.setStore)},t.$$.update=()=>{56&t.$$.dirty&&n(0,o=i||s&&r)},[o,function(t,e){return o.x==Ct(t)&&o.y==jt(e)},a,i,s,r,()=>a(0,0),()=>a(1,0),()=>a(2,0),()=>a(0,1),()=>a(1,1),()=>a(2,1),()=>a(0,2),()=>a(1,2),()=>a(2,2)]}class Ot extends ut{constructor(t){super(),ct(this,t,Pt,zt,s,{align:3,setStore:4})}}function Rt(t){let e,n,r,o,i=t[0].x+"",s=t[0].y+"";return{c(){e=x("span"),n=k(i),r=k(" - "),o=k(s),E(e,"class","coordinates svelte-1393a99")},m(t,i){b(t,e,i),m(e,n),m(e,r),m(e,o)},p(t,e){1&e&&i!==(i=t[0].x+"")&&S(n,i),1&e&&s!==(s=t[0].y+"")&&S(o,s)},d(t){t&&y(e)}}}function Tt(t){let e,n,r;return{c(){e=x("img"),E(e,"style",n="width: "+100*t[5].x+"%; height: "+100*t[5].y+"%; "+t[10](t[0].align||t[2])),E(e,"class","sprite svelte-1393a99"),a(e.src,r=t[0].sprite)||E(e,"src",r),E(e,"alt",""),E(e,"draggable","false"),z(e,"pixelated",t[1])},m(t,n){b(t,e,n)},p(t,o){37&o&&n!==(n="width: "+100*t[5].x+"%; height: "+100*t[5].y+"%; "+t[10](t[0].align||t[2]))&&E(e,"style",n),1&o&&!a(e.src,r=t[0].sprite)&&E(e,"src",r),2&o&&z(e,"pixelated",t[1])},d(t){t&&y(e)}}}function At(t){let e,n,r,i,s,l,a,c,u,d,f;function p(t,e){return t[0].sprite?Tt:Rt}s=new Ot({props:{align:t[0].align}}),s.$on("change",t[11]);let g=p(t),h=g(t);return{c(){e=x("div"),n=x("input"),r=w(),i=x("div"),it(s.$$.fragment),l=w(),a=x("span"),c=w(),h.c(),D(n,"display","none"),E(n,"type","file"),n.multiple=!0,E(n,"accept",".jpg, .jpeg, .png"),E(i,"class","align svelte-1393a99"),E(a,"class","delete svelte-1393a99"),E(e,"class","sprite-container svelte-1393a99"),z(e,"used",t[0].sprite),z(e,"drop",t[4])},m(o,p){b(o,e,p),m(e,n),t[16](n),m(e,r),m(e,i),st(s,i,null),m(e,l),m(e,a),m(e,c),h.m(e,null),u=!0,d||(f=[_(n,"change",t[15]),_(i,"click",Lt),_(a,"click",t[9]),_(e,"click",t[17]),_(e,"dragenter",t[18]),_(e,"dragleave",t[19]),_(e,"dragend",t[20])],d=!0)},p(t,[n]){const r={};1&n&&(r.align=t[0].align),s.$set(r),g===(g=p(t))&&h?h.p(t,n):(h.d(1),h=g(t),h&&(h.c(),h.m(e,null))),1&n&&z(e,"used",t[0].sprite),16&n&&z(e,"drop",t[4])},i(t){u||(et(s.$$.fragment,t),u=!0)},o(t){nt(s.$$.fragment,t),u=!1},d(n){n&&y(e),t[16](null),lt(s),h.d(),d=!1,o(f)}}}function Lt(t){return t.preventDefault(),t.stopPropagation(),!0}function Bt(t,e,n){let r,{pixelated:o=!0}=e,{spriteData:i}=e,{spriteWidth:s,spriteHeight:l}=e,{align:a}=e,{callbacks:c}=e;const u=B(),d=t=>{u("changeSprites",{files:t.target.files,origin:{x:i.x,y:i.y}})};let f=!1;function p(t){n(4,f=!0)}function g(t){n(4,f=!1)}c.callback=()=>{n(0,i),n(0,i),n(0,i),n(0,i)},c.dropped=()=>{n(4,f=!1)};let h={x:1,y:1};return t.$$set=t=>{"pixelated"in t&&n(1,o=t.pixelated),"spriteData"in t&&n(0,i=t.spriteData),"spriteWidth"in t&&n(13,s=t.spriteWidth),"spriteHeight"in t&&n(14,l=t.spriteHeight),"align"in t&&n(2,a=t.align),"callbacks"in t&&n(12,c=t.callbacks)},t.$$.update=()=>{24577&t.$$.dirty&&n(5,h={x:i.width/s,y:i.height/l})},[i,o,a,r,f,h,d,p,g,function(t){n(0,i.sprite=void 0,i),n(0,i.width=void 0,i),n(0,i.height=void 0,i),n(0,i.align=void 0,i),u("updateSprites"),Lt(t)},t=>`\n            justify-self: ${t.x};\n            align-self: ${t.y.replace("bottom","flex-end").replace("top","flex-start")};`,function(t){i.align?.x===t.detail.align.x&&i.align?.y===t.detail.align.y?n(0,i.align=void 0,i):n(0,i.align=t.detail.align,i),n(0,i),u("updateSprites")},c,s,l,t=>d(t),function(t){I[t?"unshift":"push"]((()=>{r=t,n(3,r)}))},()=>{r.click()},t=>p(),t=>g(),t=>g()]}class Ft extends ut{constructor(t){super(),ct(this,t,Bt,At,s,{pixelated:1,spriteData:0,spriteWidth:13,spriteHeight:14,align:2,callbacks:12})}}function It(t,{delay:n=0,duration:r=400,easing:o=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>"opacity: "+t*i}}function Ht(t,e,n){const r=t.slice();return r[22]=e[n],r[24]=n,r}function Nt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Mt(t){let e,n,r,o=t[0],i=[];for(let e=0;e<o.length;e+=1)i[e]=Wt(Ht(t,o,e));const s=t=>nt(i[t],1,1,(()=>{i[t]=null}));return{c(){e=x("div");for(let t=0;t<i.length;t+=1)i[t].c();E(e,"class","sprite-atlas svelte-m4jca6"),D(e,"grid-template-columns","repeat("+t[1]+", 1fr)"),D(e,"--ratio",t[2])},m(t,n){b(t,e,n);for(let t=0;t<i.length;t+=1)i[t].m(e,null);r=!0},p(t,n){if(4089&n){let r;for(o=t[0],r=0;r<o.length;r+=1){const s=Ht(t,o,r);i[r]?(i[r].p(s,n),et(i[r],1)):(i[r]=Wt(s),i[r].c(),et(i[r],1),i[r].m(e,null))}for(Z(),r=o.length;r<i.length;r+=1)s(r);tt()}(!r||2&n)&&D(e,"grid-template-columns","repeat("+t[1]+", 1fr)"),(!r||4&n)&&D(e,"--ratio",t[2])},i(t){if(!r){for(let t=0;t<o.length;t+=1)et(i[t]);q((()=>{n||(n=ot(e,It,{duration:250},!0)),n.run(1)})),r=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)nt(i[t]);n||(n=ot(e,It,{duration:250},!1)),n.run(0),r=!1},d(t){t&&y(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t),t&&n&&n.end()}}}function Wt(t){let e,n,r,i,s,l;function a(...e){return t[15](t[22],...e)}function c(...e){return t[16](t[22],...e)}function u(...e){return t[17](t[22],...e)}return n=new Ft({props:{spriteData:t[22],spriteWidth:t[3],spriteHeight:t[4],align:t[5],callbacks:t[6][t[24]]}}),n.$on("changeSprites",t[7]),n.$on("updateSprites",t[8]),{c(){e=x("div"),it(n.$$.fragment),r=w(),E(e,"class","sprite svelte-m4jca6"),E(e,"ondragover","return false"),E(e,"draggable","true")},m(t,o){b(t,e,o),st(n,e,null),m(e,r),i=!0,s||(l=[_(e,"dragstart",a),_(e,"dragend",c),_(e,"drop",u)],s=!0)},p(e,r){t=e;const o={};1&r&&(o.spriteData=t[22]),8&r&&(o.spriteWidth=t[3]),16&r&&(o.spriteHeight=t[4]),32&r&&(o.align=t[5]),n.$set(o)},i(t){i||(et(n.$$.fragment,t),i=!0)},o(t){nt(n.$$.fragment,t),i=!1},d(t){t&&y(e),lt(n),s=!1,o(l)}}}function qt(e){let n,r,o;return{c(){n=x("div"),E(n,"class","loading svelte-m4jca6")},m(t,e){b(t,n,e),o=!0},p:t,i(t){o||(q((()=>{r||(r=ot(n,It,{},!0)),r.run(1)})),o=!0)},o(t){r||(r=ot(n,It,{},!1)),r.run(0),o=!1},d(t){t&&y(n),t&&r&&r.end()}}}function Jt(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:qt,then:Mt,catch:Nt,blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,o,i){if(e.token!==n)return;e.resolved=i;let s=e.ctx;void 0!==o&&(s=s.slice(),s[o]=i);const l=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(Z(),nt(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),tt())})):e.block.d(1),l.c(),et(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&U()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=L();if(t.then((t=>{A(n),r(e.then,1,e.value,t),A(null)}),(t=>{if(A(n),r(e.catch,2,e.error,t),A(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}(St.await,r),{c(){e=x("div"),r.block.c(),E(e,"class","sprite-atlas-container svelte-m4jca6")},m(t,o){b(t,e,o),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,n=!0},p(e,[n]){!function(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}(r,t=e,n)},i(t){n||(et(r.block),n=!0)},o(t){for(let t=0;t<3;t+=1){nt(r.blocks[t])}n=!1},d(t){t&&y(e),r.block.d(),r.token=null,r=null}}}function Kt(t,e,n){let r,o,i,s;c(t,Dt,(t=>n(5,r=t))),c(t,St,(t=>n(0,o=t))),c(t,_t,(t=>n(1,i=t))),c(t,Et,(t=>n(14,s=t)));let l,a=[],d=1,f=16,p=16;function g(t){n(3,f=0),n(4,p=0),t.forEach((t=>{n(3,f=Math.max(f,t.width||0)),n(4,p=Math.max(p,t.height||0))})),n(2,d=f/p||1)}function h(t,e,n=!0){if(!St.loaded)return;const r=o;let i=[];for(let o=0;o<e;o++)for(let e=0;e<t;e++){let s={};if(n){let n=e+o*t;n<r.length&&(s.sprite=r[n].sprite,s.width=r[n].width,s.height=r[n].height,s.align=r[n].align)}i.push({x:e,y:o,...s}),a.push({callback:void 0,dropped:void 0})}u(St,o=i,o)}function m(t){const{origin:e,files:n}=t.detail,r=e.x+e.y*i;let s=o;for(let t=0;t<n.length;t++){if(r+t>=s.length)continue;let e=n[t],i=new FileReader;i.readAsDataURL(e),i.onload=e=>{s[r+t].sprite=e.target.result;let n=new Image;s[r+t].width=void 0,s[r+t].height=void 0,s[r+t].align=void 0,n.onload=e=>{s[r+t].width=n.width,s[r+t].height=n.height,a[r+t].callback(),St.save(),g(o)},n.src=e.target.result}}}function v(t,e){if(!e.sprite)return t.preventDefault(),!1;l=e}function $(t,e){l=void 0}function b(t,e){if(t.preventDefault(),a.forEach((t=>{t.dropped()})),t.dataTransfer.files.length>0)return void m({detail:{files:t.dataTransfer.files,origin:{x:e.x,y:e.y}}});let n={...l};l.sprite=e.sprite,l.width=e.width,l.height=e.height,l.align=e.align,e.sprite=n.sprite,e.width=n.width,e.height=n.height,e.align=n.align,a[l.x+l.y*_t.value].callback(),a[e.x+e.y*_t.value].callback(),l=void 0,St.save()}St.subscribe((t=>{g(t)}));return t.$$.update=()=>{16387&t.$$.dirty&&h(i,s)},[o,i,d,f,p,r,a,m,function(){St.save(),g(o)},v,$,b,function(){h(i,s,!1)},function(){let t=document.createElement("canvas");t.width=f*i,t.height=p*s;let e=new Image,n=t.getContext("2d");for(let t=0;t<s;t++)for(let s=0;s<i;s++){const l=s+t*i,{sprite:a,width:c,height:u}=o[l];if(!a)continue;e.src=a;let d=s*f,g=t*p,h=0,m=0,v=o[l].align||r;"left"==v.x?h=0:"center"==v.x?h=(f-c)/2:"right"==v.x&&(h=f-c),"top"==v.y?m=0:"center"==v.y?m=(p-u)/2:"bottom"==v.y&&(m=p-u),n.drawImage(e,d+h,g+m)}e=t.toDataURL("image/png",1).replace("image/png","image/octet-stream");let l=document.createElement("a");l.download="atlas.png",l.href=e,l.click()},s,(t,e)=>v(e,t),(t,e)=>$(),(t,e)=>b(e,t)]}class Ut extends ut{constructor(t){super(),ct(this,t,Kt,Jt,s,{clear:12,download:13})}get clear(){return this.$$.ctx[12]}get download(){return this.$$.ctx[13]}}function Gt(e){let n;return{c(){n=x("footer"),n.innerHTML='<span class="designby svelte-4z2s5r">Designed by\n        <span class="author svelte-4z2s5r">Ceyper</span></span> \n    <span class="copyright svelte-4z2s5r">© Copyright 2021<br/>All rights reserved</span>',E(n,"class","svelte-4z2s5r")},m(t,e){b(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}class Yt extends ut{constructor(t){super(),ct(this,t,null,Gt,s,{})}}const Qt={LIGHT:"light",DARK:"dark"};function Vt(t){let e,n,r,o,i,s,l=t[4].message+"",a=t[1]&&Xt(t);return{c(){e=x("div"),n=x("span"),r=k(l),o=w(),a&&a.c(),E(e,"class","error svelte-1f900da")},m(l,c){b(l,e,c),m(e,n),m(n,r),m(e,o),a&&a.m(e,null),i||(s=_(e,"click",t[7]),i=!0)},p(t,n){16&n&&l!==(l=t[4].message+"")&&S(r,l),t[1]?a?a.p(t,n):(a=Xt(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(t){t&&y(e),a&&a.d(),i=!1,s()}}}function Xt(t){let e,n,r,o,i=t[4].error+"";return{c(){e=x("br"),n=w(),r=x("span"),o=k(i),E(r,"class","exception svelte-1f900da")},m(t,i){b(t,e,i),b(t,n,i),b(t,r,i),m(r,o)},p(t,e){16&e&&i!==(i=t[4].error+"")&&S(o,i)},d(t){t&&y(e),t&&y(n),t&&y(r)}}}function Zt(t){let e,n,r;return{c(){e=x("span"),e.textContent="Saving"},m(t,n){b(t,e,n),r=!0},i(t){r||(q((()=>{n||(n=ot(e,It,{duration:200},!0)),n.run(1)})),r=!0)},o(t){n||(n=ot(e,It,{duration:200},!1)),n.run(0),r=!1},d(t){t&&y(e),t&&n&&n.end()}}}function te(t){let e,n,r,i,s,l,a,c,u,d,f,p,g,h,v,$,k,S,z,C,j,P,O,R,T,A,L,B,F,I,H=t[4]&&Vt(t),N=t[3]&&St.loaded&&Zt();p=new Ot({props:{setStore:!0}});return T=new Ut({props:{}}),t[12](T),L=new Yt({}),{c(){e=x("main"),n=x("header"),r=x("h1"),r.textContent="Sprite Packer",i=w(),H&&H.c(),s=w(),l=x("div"),N&&N.c(),a=w(),c=x("button"),c.textContent="Download",u=w(),d=x("div"),f=w(),it(p.$$.fragment),g=w(),h=x("div"),v=w(),$=x("button"),$.textContent="Clear",k=w(),S=x("div"),z=x("input"),C=w(),j=x("span"),j.textContent="x",P=w(),O=x("input"),R=w(),it(T.$$.fragment),A=w(),it(L.$$.fragment),E(r,"class","svelte-1f900da"),E(c,"class","svelte-1f900da"),E(d,"class","splitter svelte-1f900da"),E(h,"class","splitter svelte-1f900da"),E($,"class","svelte-1f900da"),z.value=t[5],E(z,"type","number"),E(z,"id","width"),E(z,"name","width"),E(z,"min","1"),E(z,"max","32"),E(z,"class","svelte-1f900da"),O.value=t[6],E(O,"type","number"),E(O,"id","height"),E(O,"name","height"),E(O,"min","1"),E(O,"max","32"),E(O,"class","svelte-1f900da"),E(S,"class","size-selector svelte-1f900da"),E(l,"class","options svelte-1f900da"),D(n,"--scroll",t[2]),E(n,"class","svelte-1f900da"),E(e,"class","svelte-1f900da")},m(o,y){b(o,e,y),m(e,n),m(n,r),m(n,i),H&&H.m(n,null),m(n,s),m(n,l),N&&N.m(l,null),m(l,a),m(l,c),m(l,u),m(l,d),m(l,f),st(p,l,null),m(l,g),m(l,h),m(l,v),m(l,$),m(l,k),m(l,S),m(S,z),m(S,C),m(S,j),m(S,P),m(S,O),m(e,R),st(T,e,null),m(e,A),st(L,e,null),B=!0,F||(I=[_(c,"click",t[8]),_($,"click",t[9]),_(z,"blur",t[10]),_(z,"keydown",ee),_(O,"blur",t[11]),_(O,"keydown",ee),_(e,"drop",ne)],F=!0)},p(t,[e]){t[4]?H?H.p(t,e):(H=Vt(t),H.c(),H.m(n,s)):H&&(H.d(1),H=null),t[3]&&St.loaded?N?8&e&&et(N,1):(N=Zt(),N.c(),et(N,1),N.m(l,a)):N&&(Z(),nt(N,1,1,(()=>{N=null})),tt()),(!B||32&e)&&(z.value=t[5]),(!B||64&e)&&(O.value=t[6]),(!B||4&e)&&D(n,"--scroll",t[2]);T.$set({})},i(t){B||(et(N),et(p.$$.fragment,t),et(T.$$.fragment,t),et(L.$$.fragment,t),B=!0)},o(t){nt(N),nt(p.$$.fragment,t),nt(T.$$.fragment,t),nt(L.$$.fragment,t),B=!1},d(n){n&&y(e),H&&H.d(),N&&N.d(),lt(p),t[12](null),lt(T),lt(L),F=!1,o(I)}}}function ee(t){13===t.keyCode&&t.target.blur()}!function(){let t=localStorage.getItem("theme")||Qt.DARK;var e;e=t,Object.entries(Qt).forEach((t=>{document.body.classList.remove(t[1])})),document.body.classList.add(e),localStorage.setItem("theme",e)}();const ne=t=>t.preventDefault();function re(t,e,n){let r,o,i,s;c(t,wt,(t=>n(4,r=t))),c(t,_t,(t=>n(5,o=t))),c(t,Et,(t=>n(6,i=t)));let l=!1,a=0;window.addEventListener("scroll",(function(){n(2,a=window.pageYOffset||document.documentElement.scrollTop)}));let d=!1;St.onSave((t=>{n(3,d=!t)}));return[s,l,a,d,r,o,i,()=>n(1,l=!l),()=>s.download(),()=>s.clear(),t=>u(_t,o=t.target.value,o),t=>u(Et,i=t.target.value,i),function(t){I[t?"unshift":"push"]((()=>{s=t,n(0,s)}))}]}gt.stores.push({name:"sprites",options:{keyPath:"key"}}),gt.name="spritepacker",gt.version=2,function(){if(!indexedDB)return void ht.callback({message:"Browser doesn't support indexedDB.",e:"Time for an upgrade perhaps?"});let t,e=indexedDB.open(gt.name,gt.version);e.onerror=t=>{ht.callback({message:"Failed to open database.",e:e.errorCode})},e.onsuccess=e=>{t=e.target.result,mt.forEach((t=>t())),pt=!0},e.onupgradeneeded=function(e){t=e.target.result,t.onerror=t=>{ht.callback({message:"Failed to upgrade database.",event:t})},gt.stores.forEach((e=>{t.createObjectStore(e.name,e.options)}))}}();const oe=new class extends ut{constructor(t){super(),ct(this,t,re,te,s,{})}}({target:document.body,props:{}});return oe}();
//# sourceMappingURL=bundle.js.map
